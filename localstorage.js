const localstorage={options:{cacheTime:86400,transientKey:"",cacheKey:""},transient:function(){let t=this,e={updateKey:function(){t.options.transientKey||(t.options.transientKey=t.options.cacheKey+"_transient")},getKey:function(){return t.options.transientKey},get:function(){let e=localStorage.getItem(t.options.transientKey);return e||this.set()},set:function(){return localStorage.setItem(t.options.transientKey,(new Date).getTime()+t.options.cacheTime)},purge:function(){localStorage.removeItem(t.options.transientKey)}};return e.updateKey(),e},shouldUpdateStorage:function(t){return!this.get(t)||(!this.transient().get()||this.transient().get()<(new Date).getTime())},update:function(t,e){localStorage.setItem(this.transient().getKey(),(new Date).getTime()+this.options.cacheTime),localStorage.setItem(t,JSON.stringify(e))},get:function(t){return this.options.cacheKey=t||!1,this.sorageData=localStorage.getItem(this.options.cacheKey),this.sorageData?JSON.parse(this.sorageData):null},purge:function(t){localStorage.removeItem(t),this.transient().purge()}};module.exports=localstorage;
